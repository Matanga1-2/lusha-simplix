# jira Exporter Workflow
# This workflow responsible for running jira exporter.
# integration.config.jira_host: The URL of your Jira, for example: https://example.atlassian.net
# integration.secrets.atlassian_user_email: The email of the user used to query Jira
# integration.secrets.atlassian_user_token: Jira API token generated by the user specified under atlassianUserEmail

on:
  schedule:
    - cron: "0 0 * * *" # This will run the workflow daily at midnight

jobs:
  export-jira:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Run Jira Exporter
        uses: port-labs/jira-exporter-action@v1
        with:
          jira_host: ${{ secrets.JIRA_HOST }}
          atlassian_user_email: ${{ secrets.ATLASSIAN_USER_EMAIL }}
          atlassian_user_token: ${{ secrets.ATLASSIAN_USER_TOKEN }}
          port_client_id: ${{ secrets.PORT_CLIENT_ID }}
          port_client_secret: ${{ secrets.PORT_CLIENT_SECRET }}
